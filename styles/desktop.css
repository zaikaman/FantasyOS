/**
 * Desktop Styles
 * Full-screen layout with mossy background and particle layer
 */

/* Desktop Container - Full viewport */
.desktop-container {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  background: var(--color-bg-dark);
  padding-bottom: 0; /* No padding needed - taskbar auto-hides */
}

/* Prevent any scrolling on body/html */
html, body {
  overflow: hidden;
  height: 100vh;
  width: 100vw;
  margin: 0;
  padding: 0;
}

/* Particles Layer - Canvas background */
.particles-layer {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: var(--z-particles);
  pointer-events: none;
}

/* Desktop Background - Enchanted Forest */
.desktop-background {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: var(--z-background);
  background-image: url('../src/assets/background.png');
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
}

/* Desktop App Icons - Grid Layout System */
/* 3 icons per column with automatic column wrapping */
/* Column width: 150px icon + 100px spacing = 250px per column */
/* Row height: 150px icon + 80px spacing = 230px per row */

/* Base styles for all desktop icons */
.quest-log-button,
.potion-mixer-notepad,
.treasure-chest,
.weather-orb,
.mana-orb,
.realm-customizer-altar,
.echo-chamber-terminal {
  position: absolute;
  width: 150px;
  height: auto;
  z-index: var(--z-desktop);
  cursor: pointer;
  transition: transform var(--transition-normal), filter var(--transition-normal);
  filter: drop-shadow(0 8px 16px rgba(0, 0, 0, 0.6));
}

.quest-log-button img,
.potion-mixer-notepad img,
.treasure-chest img,
.weather-orb img,
.mana-orb img,
.realm-customizer-altar img,
.echo-chamber-terminal img {
  width: 100%;
  height: auto;
  display: block;
}

/* Icon 1: Quest Log - Column 1, Row 1 (Top) */
.quest-log-button {
  bottom: calc(80px + 230px * 2); /* 80px base + 2 rows */
  left: 50px;
  animation: float 3.8s ease-in-out infinite;
  animation-delay: 0.3s;
}

.quest-log-button:hover {
  transform: scale(1.05) translateY(-5px);
  filter: drop-shadow(0 12px 24px rgba(0, 0, 0, 0.7))
          drop-shadow(0 0 20px rgba(255, 215, 100, 0.5));
}

.quest-log-button:active {
  transform: scale(0.98) translateY(-2px);
}

/* Icon 2: Potion Mixer - Column 1, Row 2 (Middle) */
.potion-mixer-notepad {
  bottom: calc(80px + 230px * 1); /* 80px base + 1 row */
  left: 50px;
  animation: float 4.1s ease-in-out infinite;
  animation-delay: 0.6s;
}

.potion-mixer-notepad:hover {
  transform: scale(1.05) translateY(-5px);
  filter: drop-shadow(0 12px 24px rgba(0, 0, 0, 0.7))
          drop-shadow(0 0 20px rgba(144, 238, 144, 0.5));
}

.potion-mixer-notepad:active {
  transform: scale(0.98) translateY(-2px);
}

/* Icon 3: Treasure Chest - Column 1, Row 3 (Bottom) */
.treasure-chest {
  bottom: 80px; /* Base position */
  left: 50px;
  animation: float 4s ease-in-out infinite;
  animation-delay: 0.5s;
}

.treasure-chest:hover {
  transform: scale(1.05) translateY(-5px);
  filter: drop-shadow(0 12px 24px rgba(0, 0, 0, 0.7))
          drop-shadow(0 0 20px rgba(212, 175, 55, 0.4));
}

.treasure-chest:active {
  transform: scale(0.98) translateY(-2px);
}

/* Icon 4: Weather Oracle - Column 2, Row 1 (Top) */
.weather-orb {
  bottom: calc(80px + 230px * 2); /* 80px base + 2 rows */
  left: calc(50px + 250px * 1); /* 50px base + 1 column width */
  animation: float 4.2s ease-in-out infinite;
  animation-delay: 0.7s;
}

.weather-orb:hover {
  transform: scale(1.08) translateY(-5px);
  filter: drop-shadow(0 12px 24px rgba(0, 0, 0, 0.7))
          drop-shadow(0 0 30px rgba(157, 127, 240, 0.6));
}

.weather-orb:active {
  transform: scale(0.95) translateY(-2px);
}

/* Icon 5: Mana Calculator - Column 2, Row 2 (Middle) */
.mana-orb {
  bottom: calc(80px + 230px * 1); /* 80px base + 1 row */
  left: calc(50px + 250px * 1); /* 50px base + 1 column width */
  animation: float 3.5s ease-in-out infinite;
  animation-delay: 0.2s;
}

.mana-orb:hover {
  transform: scale(1.08) translateY(-5px);
  filter: drop-shadow(0 12px 24px rgba(0, 0, 0, 0.7))
          drop-shadow(0 0 30px rgba(0, 255, 255, 0.5));
}

.mana-orb:active {
  transform: scale(0.95) translateY(-2px);
}

/* Icon 6: Realm Customizer Altar - Column 2, Row 3 (Bottom) */
.realm-customizer-altar {
  bottom: 80px; /* Base position */
  left: calc(50px + 250px * 1); /* 50px base + 1 column width */
  animation: float 3.9s ease-in-out infinite;
  animation-delay: 0.4s;
}

.realm-customizer-altar:hover {
  transform: scale(1.08) translateY(-5px);
  filter: drop-shadow(0 12px 24px rgba(0, 0, 0, 0.7))
          drop-shadow(0 0 30px rgba(157, 127, 240, 0.6));
}

.realm-customizer-altar:active {
  transform: scale(0.95) translateY(-2px);
}

/* Icon 7: Echo Chamber Terminal - Column 3, Row 3 (Bottom Center) */
.echo-chamber-terminal {
  bottom: 80px;
  left: calc(50px + 250px * 2); /* Column 3 */
  animation: float 3.9s ease-in-out infinite;
  animation-delay: 0.7s;
}

.echo-chamber-terminal:hover {
  transform: scale(1.08) translateY(-5px);
  filter: drop-shadow(0 12px 24px rgba(0, 0, 0, 0.7))
          drop-shadow(0 0 30px rgba(0, 255, 136, 0.6));
}

.echo-chamber-terminal:active {
  transform: scale(0.95) translateY(-2px);
}

/* Future Icon Positioning Guide:
 * Icon 7 would be: bottom: calc(80px + 230px * 2); left: calc(50px + 250px * 2); (Column 3, Row 1)
 * Icon 8 would be: bottom: calc(80px + 230px * 1); left: calc(50px + 250px * 2); (Column 3, Row 2)
 * Icon 9 would be: bottom: 80px; left: calc(50px + 250px * 2); (Column 3, Row 3)
 * And so on...
 */

/* App Launcher - Rune icons grid */
.app-launcher {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: var(--z-desktop);
  display: flex;
  gap: var(--rune-spacing);
  align-items: center;
  justify-content: center;
}

/* Rune Icon Container */
.rune-icon {
  position: relative;
  width: var(--rune-icon-size);
  height: var(--rune-icon-size);
  cursor: pointer;
  transition: transform var(--transition-normal);
  animation: float 3s ease-in-out infinite;
}

.rune-icon:nth-child(1) {
  animation-delay: 0s;
}

.rune-icon:nth-child(2) {
  animation-delay: 0.5s;
}

.rune-icon:nth-child(3) {
  animation-delay: 1s;
}

/* Rune Icon SVG */
.rune-icon svg {
  width: 100%;
  height: 100%;
  filter: drop-shadow(0 0 10px rgba(255, 215, 0, 0.5));
  transition: filter var(--transition-normal);
}

/* Rune Icon Hover Effects */
.rune-icon:hover {
  transform: scale(1.1);
}

.rune-icon:hover svg {
  filter: drop-shadow(0 0 20px rgba(255, 215, 0, 0.8));
}

.rune-icon:active {
  transform: scale(0.95);
}

/* Rune Tooltip */
.rune-tooltip {
  position: absolute;
  bottom: -40px;
  left: 50%;
  transform: translateX(-50%);
  padding: var(--spacing-sm) var(--spacing-md);
  background: rgba(26, 20, 16, 0.9);
  color: var(--color-text-light);
  font-size: var(--font-size-sm);
  border-radius: var(--radius-md);
  white-space: nowrap;
  pointer-events: none;
  opacity: 0;
  transition: opacity var(--transition-fast);
  z-index: var(--z-tooltip);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 215, 0, 0.3);
}

.rune-icon:hover .rune-tooltip {
  opacity: 1;
}

/* Desktop Workspace - Windows container */
.desktop-workspace {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  /* No z-index - let child windows manage their own stacking */
  pointer-events: none;
  overflow: hidden; /* Prevent windows from causing scrollbars */
}

.desktop-workspace > * {
  pointer-events: auto;
}

/* Windows Container */
.windows-container {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: var(--z-desktop);
  pointer-events: none;
}

.windows-container > * {
  pointer-events: auto;
}

/* Loading Overlay */
.loading-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: var(--color-bg-dark);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: var(--z-loading);
  animation: fadeOut var(--transition-slow) forwards;
  animation-delay: 1s;
}

.loading-overlay.hidden {
  display: none;
}

.loading-spinner {
  width: 80px;
  height: 80px;
  margin-bottom: var(--spacing-lg);
}

.rune-spinner {
  width: 100%;
  height: 100%;
  border: 4px solid rgba(255, 215, 0, 0.2);
  border-top-color: var(--color-accent);
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

.loading-text {
  color: var(--color-text-light);
  font-size: var(--font-size-lg);
  opacity: 0.8;
}

/* Error Boundary */
.error-boundary {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: var(--color-bg-dark);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: var(--z-loading);
}

.error-boundary.hidden {
  display: none;
}

.error-container {
  text-align: center;
  padding: var(--spacing-2xl);
  max-width: 500px;
}

.error-container h1 {
  color: var(--color-text-light);
  font-size: var(--font-size-3xl);
  margin-bottom: var(--spacing-lg);
}

.error-message {
  color: var(--color-text-muted);
  font-size: var(--font-size-base);
  margin-bottom: var(--spacing-xl);
}

.btn-reload {
  padding: var(--spacing-md) var(--spacing-xl);
  background: var(--color-accent);
  color: var(--color-text-dark);
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-bold);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: all var(--transition-normal);
  box-shadow: var(--glow-gold);
}

.btn-reload:hover {
  background: var(--color-accent-light);
  transform: translateY(-2px);
}

.btn-reload:active {
  transform: translateY(0);
}
